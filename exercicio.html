<html>

<head>


</head>

<body>
</body>

<script>

function calculate(str) {
    let vowels = ['a', 'e', 'i', 'o', 'u', 'y']
    let words = str.split(' ');
    let prefix = '';
    let stem = '';
    let isUpperCase = false;
    let result = [];
    for (let i = 0; i < words.length; i++) {
        if(hasJustNumbers(words[i])) {
            result.push(words[i]);
            continue;
        }
        prefix = '';
        stem = '';
        isUpperCase = words[i][0] === words[i][0].toUpperCase();
        let word = words[i].toLowerCase();
        let findedVowel = false;
        let punctuation = '';
        if(!isCharacterALetter(word.substr(word.length - 1))) {
            punctuation = word.substr(word.length - 1);
            word = word.slice(0, -1);
        }
        for (let j = 0; j < word.length; j++) {
            if(vowels.includes(word[j])) {
                findedVowel = true;
            }
            if(!findedVowel) {
                prefix += word[j];
            } else {
                stem += word[j];
            }
        }
        stem = isUpperCase ? capitalizeFirstLetter(stem) : stem;
        result.push(stem + prefix + 'ay' + punctuation.trim());
    }
    return result.join(' ')
}

function capitalizeFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
}

function isCharacterALetter(char) {
    return (/[a-zA-Z]/).test(char)
}
function hasJustNumbers(char) {
    return (/[0-9]/).test(char)
}

const strings = [
    ['Stop', ['Opstay']],
    ['No littering', ['Onay itteringlay']],
    ['No shirts, no shoes, no service', ['Onay irtsshay, onay eosshay, onay ervicesay']],
    ['No persons under 14 admitted', ['Onay ersonspay underay 14 admitteday']],
    ['Hey buddy, get away from my car!', ['Eyhay uddybah, etgay awayay omfray ymay arcay!']],
];

strings.forEach(([str, cor]) => {
  const elem = document.createElement('div')
  const ans = calculate(str)
  const isCor = cor.includes(ans)
  elem.innerHTML = `${isCor ? "OK" : "FAILED"} ${str} --> ${ans} ${isCor ? "" : "expected " + cor}`
  document.body.appendChild(elem)
});


</script>

</html>